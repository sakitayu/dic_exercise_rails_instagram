<header>
  <div class="header_box">
    <%= link_to blogs_path do %>
      <%= image_tag "pachi_icon.png", class: 'pachi_icon' %>
    <% end %>

    <%= image_tag "header_border.png", class: 'header_border' %>

    <%= link_to blogs_path do %>
      <%= image_tag "pachi_letter_logo.png", class: 'pachi_letter_logo' %>
    <% end %>

    <span><%= image_tag "search_icon.png", class: 'search_icon' %>検索</span>
    <%= image_tag "compass_img.png", class: 'compass_img' %>
    <%= image_tag "heart_img.png", class: 'heart_img' %>

    <%= link_to user_path(current_user.id) do %>
      <%= image_tag "user_img.png", class: 'user_img' %>
    <% end %>
  </div>
</header>

<main>
<h1><%= @user.name %> さんのお気に入り一覧</h1>
<br>
<br>
<br>
<table>
<% @favorites.each do |favorite| %>
  <tr>
    <td>投稿者→<%= link_to "#{favorite.user.name}", user_path(favorite.user.id) %></td>
    <td>投稿日→<%= favorite.user.created_at.try(:strftime,"%m月%d日") %></td>
    <td>文章→<%= favorite.blog.content %></td>
    <td><%= link_to '詳細', blog_path(favorite.blog.id) %></td>
    <% if current_user.id == favorite.user.id %>
      <td><%= link_to "編集", edit_blog_path(favorite.blog.id) %></td>
      <td>
        <%= link_to '削除', blog_path(favorite.blog.id), method: :delete ,data: { confirm: '本当に削除していいですか？' } %>
      </td>
    <% end %>
  </tr>
  <tr>
    <td>
      <% if favorite.blog.image.file.nil? %>
        <% else %>
        <%= image_tag favorite.blog.image.url %>
      <% end %>
    </td>
    <td>
    <% @favorite = current_user.favorites.find_by(blog_id: favorite.blog.id) %>
    <% if @favorite.present? %>
    <%= link_to 'お気に入り解除する', favorite_path(id: @favorite.id), method: :delete, class: 'btn btn-danger' %>
      <% else %>
    <%= link_to 'お気に入りする', favorites_path(blog_id: favorite.blog.id), method: :post, class: 'btn btn-primary' %>
    <% end %>
    </td>
  </tr>
<% end %>
</table>
<br>
<br>
</main>